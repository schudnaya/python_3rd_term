from typing import Generator, List


def fib_sequence(n: int) -> List[int]:
    """
    функция возвращает список из первых n чисел Фибоначчи
    последовательность начинается с 0, 1, 1, 2, 3, 5...

    :param n: сколько чисел нужно получить
    :return: список чисел Фибоначчи
    """

    # создаём пустой список, куда будем добавлять числа
    result: List[int] = []

    # первые два числа последовательности
    a: int = 0
    b: int = 1

    # если n = 0, цикл просто не выполнится и вернётся пустой список
    for _ in range(n):
        # добавляем текущее число
        result.append(a)

        # считаем следующее число
        # логика: новое a становится b,
        # новое b становится a + b
        a, b = b, a + b

    return result


def my_genn() -> Generator[List[int], int, None]:
    """
    1. запускаем сопрограмму через next()
    2. передаем число через send(n)
    3. возвращается список из первых n чисел Фибоначчи

        gen = my_genn()
        next(gen)
        gen.send(5)
    """

    # первая строка yield нужна для запуска сопрограммы
    # без неё send() вызовет ошибку
    n: int = yield

    # бесконечный цикл, чтобы можно было вызывать send() много раз подряд
    while True:

        # проверяем корректность числа
        if n < 0:
            raise ValueError("n должно быть >= 0")

        # генерируем список чисел
        fib_list: List[int] = fib_sequence(n)

        # yield возвращает результат наружу и ждёт новое значение через send()
        n = yield fib_list